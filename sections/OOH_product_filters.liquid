{% assign iteration = 0 %}
{% assign selected_vibe = '' %}

{{ 'paint-details-slider.css' | asset_url | stylesheet_tag }}
{{ 'promo-header.css' | asset_url | stylesheet_tag }}

{{ 'swiper.css' | asset_url | stylesheet_tag }}

{{ 'swiper-mod.css' | asset_url | stylesheet_tag }}

<script src="{{ 'swiper.js' | asset_url }}" defer></script>
<script src="{{ 'ooh-script.js' | asset_url }}" defer></script>

<style>

  /* ===============================================
  // Reveal module
  // =============================================== */

  .reveal .hidden {
    display: block !important;
    visibility: visible !important;
  }

  .product:hover .reveal img {
    opacity: 1;
  }

  .vibe_label {
    position: relative;
  }

  .reveal {
    position: relative;
    display: flex;
    width: 100%;
    max-width: 200px;
    height: 100%;
    max-height: 200px;
  }

  .reveal .hidden {
    position: absolute;
    z-index: -1;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -55%);
    opacity: 0;
    -webkit-transition: opacity 0.3s ease-in-out;
    -moz-transition: opacity 0.3s ease-in-out;
    -o-transition: opacity 0.3s ease-in-out;
    transition: opacity 0.3s ease-in-out;
  }

  .reveal .hidden {
    width: 70%;
    height: 70%;
    object-fit: contain;
  }

  .vibe_label:has(input:disabled) .reveal::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2;
  }

  .reveal:hover .hidden,
  .vibe_label:has(input:checked) .hidden {
    z-index: 0;
    opacity: 1;
  }

  .reveal .caption {
    position: absolute;
    top: 0;
    display: table;
    width: 100%;
    height: 100%;
    background-color: white;
    /* fallback for IE8 */
    background-color: rgba(255, 255, 255, 0.7);
    font: 13px/1.6 sans-serif;
    text-transform: uppercase;
    color: #333;
    letter-spacing: 1px;
    text-align: center;
    text-rendering: optimizeLegibility;
  }

  .reveal .hidden .caption .centered {
    display: table-cell;
    vertical-align: middle;
  }
  @media (min-width: 480px) and (max-width: 979px) {
    .reveal .caption {
      font-size: 11px;
    }
  }


  div#quickchat-button {
    display:none !important;
  }
  div#quickchat-intro-div {
    display: none !important;
}


  /* checkbox code */

  .product-item {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .prev-next-btn-next::before {
    background: url({{ 'arrow-right.svg' | asset_url }}) no-repeat center;
  }
  .prev-next-btn-prev::before {
    background: url({{ 'arrow-left.svg' | asset_url }}) no-repeat center;
  }

  /* img.grid-view-item__image {
    max-width: 86px;
  } */

  .icon--status::after {
    background: url("{{ 'icon-tick.svg' | asset_url }}") no-repeat center;
  }
  .icon--eye::after {
    background: url("{{ 'ion_eye-sharp.svg' | asset_url }}") no-repeat center;
  }
</style>

{% assign selected_vibe = blank %}
{% assign iteration = iteration | plus: 0 %}
{% assign vibe_options = "" %}

{% assign vibe_collections = section.settings.vibe_collections %}
{% for collection in vibe_collections %}
  {% if collection.handle contains 'vibe' %}
    {% assign iteration = iteration | plus: 1 %}
    {% if iteration == 1 %}
      {% assign selected_vibe = collection %}
    {% endif %}
    {%- capture vibe_options %}
      {{ vibe_options }}
      <option value="{{ collection.handle }}" {% if iteration==1 %} selected {% endif %} data-title="{{ collection.title }}">
        {{ collection.title }}
      </option>
    {% endcapture -%}
  {% endif %}
{% endfor %}

<ooh-campaign-component>
<form id="vibe-selection">

  <!-- Vibe Selection Carausel will come here -->
  <vibe-selection-slider id="vibe_carousel">
    <div class="vibe--selection__wrapper">
      <div class="swiper vibe-selection-slider">
        <div class="swiper-wrapper">
          {% for collection in vibe_collections %}
            {% assign image = collection.featured_image %}
            {% assign image_mobile = collection.metafields.images.mobile_image %}

            {% if image_mobile == blank %}
              {% assign image_mobile = collection.featured_image %}
            {% endif %}
            {% style %}
              [data-slide="vibe-slide-{{ collection.handle }}"] .slide-bg::before {
                background: url("{{ image_mobile | image_url: width: 1000 }}") no-repeat center center/cover;
              }
              @media only screen and (min-width: 740px) {
                [data-slide="vibe-slide-{{ collection.handle }}"] .slide-bg::before {
                  background: url("{{ image | image_url: width: 2000 }}") no-repeat center center/cover;
                }
              }
            {% endstyle %}
            <div class="swiper-slide" data-slide="vibe-slide-{{ collection.handle }}">
              <div class="content--wrapper">
                <div class="slide-bg"></div>
                <div class="vibe--selection__text">
                  <p class="ooh_vibe_selection_title gush-font-h1">Whatâ€™s your vibe?</p>
                </div>
                <div class="vibe--selection__button">
                  <a href="#ooh_product_filter_section" class="collection_button vibe-selection-button" data-value="{{ collection.handle }}">{{ collection.title }}</a>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
      <button class="vibe--selection__prev-next-btn vibe--selection__prev-next-btn-prev">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64" fill="none">
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(-1 0 0 1 12.0415 28.2305)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(-1 0 0 1 26.6665 28.2305)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(-1 0 0 1 37.333 28.2305)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(-1 0 0 1 48 28.2305)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(-1 0 0 1 58.6665 28.2305)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(-1 0 0 1 19.583 35.7715)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(-1 0 0 1 27.125 43.3125)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(-1 0 0 1 34.6665 50.8555)" fill="white"/>
          <path d="M31.9998 10.6673C30.5271 10.6673 29.3332 9.47341 29.3332 8.00065C29.3332 6.52789 30.5271 5.33398 31.9998 5.33398C33.4726 5.33398 34.6665 6.52789 34.6665 8.00065C34.6665 9.47341 33.4726 10.6673 31.9998 10.6673Z" fill="white"/>
          <circle cx="24.4583" cy="15.5423" r="2.66667" transform="rotate(180 24.4583 15.5423)" fill="white"/>
          <circle cx="16.9163" cy="23.0872" r="2.66667" transform="rotate(180 16.9163 23.0872)" fill="white"/>
        </svg>
      </button>
      <button class="vibe--selection__prev-next-btn vibe--selection__prev-next-btn-next">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64" fill="none">
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(1 0 0 -1 51.9583 35.7695)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(1 0 0 -1 37.3333 35.7695)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(1 0 0 -1 26.6665 35.7695)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(1 0 0 -1 16 35.7695)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(1 0 0 -1 5.33325 35.7695)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(1 0 0 -1 44.4165 28.2285)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(1 0 0 -1 36.875 20.6875)" fill="white"/>
          <circle cx="2.66667" cy="2.66667" r="2.66667" transform="matrix(1 0 0 -1 29.3333 13.1445)" fill="white"/>
          <path d="M31.9999 53.3327C33.4727 53.3327 34.6666 54.5266 34.6666 55.9993C34.6666 57.4721 33.4727 58.666 31.9999 58.666C30.5272 58.666 29.3333 57.4721 29.3333 55.9993C29.3333 54.5266 30.5272 53.3327 31.9999 53.3327Z" fill="white"/>
          <circle cx="39.5417" cy="48.4577" r="2.66667" fill="white"/>
          <circle cx="47.0832" cy="40.9128" r="2.66667" fill="white"/>
        </svg>

      </button>
    </div>
  </vibe-selection-slider>
  
<!-- OOH product filters starts from here -->

<div id="ooh_product_filter_section">
  <div class="filtered_product_section">
    <h2 class="gush-font-h1" style="font-size:42px">Pick 3 colours.</h2>
    <p class="promo_text">These pocket-sized 20ml paint samples are the best way to experience colours in person.</p>

    <div class="filter_drop_down">
      <div class="collection-filter">
        <label class="vibe_selection_strip_label">
          <span class="vibe_drop_back">
            <img src="https://cdn.shopify.com/s/files/1/0614/1470/3297/files/Group_747.svg">
          </span>
          <span>Showing </span>
          <span class="selected-vibe__title">{{ selected_vibe.title }}</span>
          <span> vibe pallet</span>
        </label>
        <select id="collection-filter-select">
          {{ vibe_options }}
        </select>
        <div>
          <div>1</div>
          <div>1</div>
          <div>1</div>
        </div>
      </div>
    </div>

    <height-observer data-container=".vibe__container">
      <div class="vibe__container">
        {% for collection in vibe_collections %}
          <div class="vibe__wrapper" data-vibe="{{ collection.handle }}" data-active="{% if forloop.first %}true{% else %}false{% endif %}">
            <div class="vibe__content" data-observable-element>
              <vibe-slider-component data-container=".swiper">
                <div class="content-wrapper">
                  <div class="swiper">
                    <div class="swiper-wrapper">
                      {% for product in collection.products %}
                        {%- liquid
                           assign current_variant = blank
                           
                           for variant in product.variants
                             if variant.option1 == 'Gush Cair' and variant.option2 == 'Paint Sample (20ml)'
                               assign current_variant = variant
                             endif
                           endfor
                        -%}
                        {% if current_variant != blank %}
                          {% assign image = product.featured_image %}
                          {% if product.images[1] != blank %}
                            {% assign image = product.images[1] %}
                          {% endif %}
                          
                          <div class="swiper-slide">
                            <div class="product-item">
                              <label class="vibe_label" for="vibe_{{ collection.handle }}_{{ product.id }}">
                                <input
                                  type="checkbox"
                                  name="vibe"
                                  id="vibe_{{ collection.handle }}_{{ product.id }}"
                                  class="vibe_input hidden-checkbox"
                                  value="{{ current_variant.id }}"
                                  autocomplete="off"
                                  
                                  data-title="{{ product.title }}"
                                  data-bg-color="{{ product.metafields.custom.color }}"
                                >
                                <span class="checkmark"></span>
                                <div class="reveal">
                                  <img class="grid-view-item__image" src="{{ image | img_url: '200x200' }}" loading="lazy">
                                  <img class="hidden" src="{{ 'paint_pack_sacket.png' | asset_url }}" loading="lazy">
                                </div>
                              </label>
                              <h4 class="filtered_product_title">{{ product.title }}</h4>
                              <h5 class="filtered_varient_title">{{ current_variant.title | replace: "Gush Cair / ", "" }}</h5>
                              <!-- Add code to display product image, price, etc. -->
                            </div>
                          </div>
                        {% endif %}
                      {% endfor %}
                    </div>
                    
                    <div class="swiper--controls">
                      <div class="pagination"></div>
                      <div class="prev-next-btn prev-next-btn-next"></div>
                      <div class="prev-next-btn prev-next-btn-prev"></div>
                    </div>
                  </div>
                </div>
              </vibe-slider-component>
            </div>
          </div>
        {% endfor %}
      </div>
    </height-observer>
    <div class="selection--status-wrapper">
      <div class="selection--status">
        <span class="icon--status"></span>
        <span class="text--status">0/3</span>
        <span class="helper--text">paint samples selected</span>
        <a href="#OOH_order_details_section_rearranged" class="icon--eye-container">
          <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M11 13.75C12.5188 13.75 13.75 12.5188 13.75 11C13.75 9.48122 12.5188 8.25 11 8.25C9.48122 8.25 8.25 9.48122 8.25 11C8.25 12.5188 9.48122 13.75 11 13.75Z" fill="white"></path>
            <path d="M16.9649 6.06633C15.0863 4.77812 13.0758 4.125 10.9897 4.125C9.11238 4.125 7.28234 4.68359 5.55027 5.77844C3.80359 6.88488 2.09129 8.89453 0.6875 11C1.82273 12.8906 3.37562 14.8345 4.99297 15.9491C6.84836 17.227 8.86574 17.875 10.9897 17.875C13.0952 17.875 15.1082 17.2275 16.9752 15.9504C18.6188 14.8242 20.1829 12.8829 21.3125 11C20.179 9.13387 18.6098 7.19469 16.9649 6.06633ZM11 15.125C10.1842 15.125 9.38663 14.8831 8.70827 14.4298C8.02992 13.9766 7.50121 13.3323 7.189 12.5786C6.87679 11.8248 6.7951 10.9954 6.95426 10.1953C7.11343 9.39508 7.50629 8.66008 8.08318 8.08318C8.66008 7.50629 9.39508 7.11343 10.1953 6.95426C10.9954 6.7951 11.8248 6.87679 12.5786 7.189C13.3323 7.50121 13.9766 8.02992 14.4298 8.70827C14.8831 9.38663 15.125 10.1842 15.125 11C15.1237 12.0936 14.6888 13.1421 13.9154 13.9154C13.1421 14.6888 12.0936 15.1237 11 15.125Z" fill="white"></path>
          </svg>
          <!-- <span class="icon--eye"></span> -->
        </a>
        
      </div>
    </div>
  </div>
</div>


  <!-- OOH Whats include in package starts from here -->

<div id="ooh_package_you_get_section">
  <h2 class="gush-font-h1" style="font-size:42px" >Your bundle includes:</h2>
  <p class="promo_text">3 paint samples, paint sponges, paint palettes and swatch cards.</p>
  <div class="ooh_package_banner">
    <img src="https://cdn.shopify.com/s/files/1/0614/1470/3297/files/package_include.png?v=1696872774">
</div>
</div> 


  <div class="survey_plus_order"> 
       <div class="ooh_survey_container">
<!-- OOH survey starts from here -->
         
<div id="ooh_survey_section">
  <h2 class="gush-ooh_main_heading" >Tell us more about your painting needs.</h2>
      <div class="question_class question1_class">
        <h3 class="survey_question">What are you painting?</h3>
        <label>
          <input class="survey_question" type="radio" name="question1" value="One Room" autocomplete="off">One room
          <span class="checkmark"></span>
        </label>
        <label>
          <input class="survey_question" type="radio" name="question1" value="Multiple Room" autocomplete="off">Multiple rooms
          <span class="checkmark"></span>
        </label>
      </div>
      <div class="question_class question2_class">
        <h3 class="survey_question">How soon do you want to start painting?</h3>
        <label>
          <input type="radio" name="question2" value="Within 1-4 Weeks" autocomplete="off">Within 1 month
          <span class="checkmark"></span>
        </label>
        <label id="OOH_order_details_section_rearranged" >
          <input type="radio" name="question2" value="Within 1-3 Months" autocomplete="off">Within 1-3 months
          <span class="checkmark"></span>
        </label>
        <label>
          <input type="radio" name="question2" value="More then 3 Months" autocomplete="off">More than 3 months
          <span class="checkmark"></span>
        </label>
      </div>
    </div>

<!-- OOH Order Deatils starts from here -->

  <div id="OOH_order_details_section" class="order-details-container">
      <h2 class="gush-font-h1">Your Order Summary</h2>

      <div class="order">
        <div class="order-marker">
          <span></span>
          <span></span>
          <span></span>
        </div>

        <div class="order-header">
          <h3>Paint Samples</h3>
          <span>x3</span>
          <span>$0</span>
        </div>

        <div class="order-details">
          <div class="order-props">
            <div class="option1_info option_info">
              <span class="option_name">Colour</span>
              <span id="selected_colors"><span class="colors"></span></span>
            </div>
            <div class="option2_info option_info">
              <span class="option_name">Size</span>
              <span>Paint Sample (20ml)</span>
            </div>
            
          </div>
        </div>
      </div>
    </div>



  <!-- OOH Order Deatils starts from here -->
  <div class="shipping_details_tnC">
    <p>Shipping fee</p>
    <div class="shipping_charge">
      <label>
        <input type="radio" checked name="free_shipping" value="One Room">
        <span class="checkmark"></span>
      </label>
      <span style="text-decoration: line-through;line-height:100%">$3.50 SGD</span> Nice â€“ youâ€™ve got free shipping
    </div>
    <div class="left_right_container">
      <div class="left">Total</div>
      <div class="right">Free</div>
    </div>
    
    <p class="ooh_terms_condition">Your personal data will be used to process your order, support your experience throughout this website, and for other purposes described in our <a class="ooh_hyperlink" href="{{ routes.root_url }}/pages/privacy-policy">Privacy Policy</a></p>
    <div class="tnc_acknowledge_section">
      <input type="checkbox" id="tnc" name="gush TnC" class="gush_tnc_checkbox" value="I have read and agree to the gush.earth">
      <p>*I have read and agreed to the gush.earth <a class="ooh_hyperlink_tc" href="{{ routes.root_url }}/pages/terms-and-conditions">terms and conditions</a></p>
    </div>
  </div>
  
  <button type="submit" disabled class="checkout_button">Place order <img src="https://cdn.shopify.com/s/files/1/0614/1470/3297/files/Group_2223.svg?v=1696707059"></button>
  <div class="congratulations_message_free_ship display_none">
    <img src="https://cdn.shopify.com/s/files/1/0614/1470/3297/files/Group_3.svg?v=1696707356">Nice â€“ youâ€™ve got free shipping
  </div>
  </div>
    <img class="footer_banner" src="https://cdn.shopify.com/s/files/1/0614/1470/3297/files/08_2.png?v=1696707672">
  </div>

  
</form>
  <ooh-errors>
    <div class="error--message" data-error-type="vibe_selection">
      <span class="icon--status"></span>
      <span>Please select 3 colors first</span>
    </div>
    <div class="error--message" data-error-type="maximum_selection">
      <span class="icon--status"></span>
      <span>Limited to 3 free samples</span>
    </div>
    <div class="error--message" data-error-type="tnc_error">
      <span class="icon--status"></span>
      <span>Please accept GUSH TermsÂ &amp; Condition</span>
    </div>
    <div class="error--message" data-error-type="questionire">
      <span class="icon--status"></span>
      <span>Weâ€™d like to help. Choose your answers!</span>
    </div>
  </ooh-errors>
</ooh-campaign-component>

  
{% schema %}
 {
    "name":"OOH Filter Products",
    "settings":[
        {
            "type":"text",
            "id":"heading",
            "label":"Heading"
        },
      {
        "type": "collection_list",
        "id": "vibe_collections",
        "label": "Vibes"
      }
    ],
    "blocks":[
        {
            "type":"slide",
            "name":"Slide",
            "settings":[
                {
                    "type":"image_picker",
                    "id":"img",
                    "label":"Image"
                },
              {
"id" : "vibe_collection",
"type" : "collection",
"label" : "collection"
}
            ]
        }
    ],
    "presets":[
        {
            "name":"OOH Filter Products"
        }
    ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
