{% assign iteration = 0 %}
{% assign selected_vibe = '' %}

{{ 'paint-details-slider.css' | asset_url | stylesheet_tag }}
<!-- Add the slick-theme.css if you want default styling -->
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
<!-- Add the slick-theme.css if you want default styling -->
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css">
<style>
  .vibe-1 {
    display: flex;
    justify-content: center;
  }

  .vibe-2 {
    display: flex;
    justify-content: center;
  }

  .vibe-3 {
    display: flex;
    justify-content: center;
  }

  /* ===============================================
  // Reveal module
  // =============================================== */

  .reveal .hidden {
    display: block !important;
    visibility: visible !important;
  }

  .product:hover .reveal img {
    opacity: 1;
  }

  .reveal {
    position: relative;
  }

  .reveal .hidden {
    position: absolute;
    z-index: -1;
    top: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    -webkit-transition: opacity 0.3s ease-in-out;
    -moz-transition: opacity 0.3s ease-in-out;
    -o-transition: opacity 0.3s ease-in-out;
    transition: opacity 0.3s ease-in-out;
  }

  .reveal:hover .hidden {
    z-index: 100000;
    opacity: 1;
  }

  .reveal .caption {
    position: absolute;
    top: 0;
    display: table;
    width: 100%;
    height: 100%;
    background-color: white;
    /* fallback for IE8 */
    background-color: rgba(255, 255, 255, 0.7);
    font: 13px/1.6 sans-serif;
    text-transform: uppercase;
    color: #333;
    letter-spacing: 1px;
    text-align: center;
    text-rendering: optimizeLegibility;
  }

  .reveal .hidden .caption .centered {
    display: table-cell;
    vertical-align: middle;
  }

  .banner .banner__content {
    display: none;
  }

  @media (min-width: 480px) and (max-width: 979px) {
    .reveal .caption {
      font-size: 11px;
    }
  }
</style>
<style>
    .collection_button {
      border-radius: 1px;
  border: 1px solid var(--Secondary-6, #302112);
      display: inline-flex;
  padding: 20px;
  justify-content: center;
  align-items: center;
  gap: 20px;
    }
</style>
<ooh-campaign-component>
<form id="vibe-selection">
<div class="page-width">
  <h2 class="gush-font-h2">What's your vibe?</h2>
  <div class="slider-container-2">
    <div class="paint-swiper-1">
      <div class="swiper-wrapper-1">
        <div class="collection-filter">
          
          <label for="collection-filter-select">Filter by Collection:</label>
          <select id="collection-filter-select">
            {% for collection in collections %}
            {% if collection.handle contains 'vibe' %}
            {% assign iteration = iteration | plus: 1 %}
            {% if iteration == 1 %}
            {% assign selected_vibe = collection.handle %}
            {% endif %}
            <option value="{{ collection.handle }}" {% if iteration==1 %} selected {% endif %}>{{ collection.title }}</option>
            {% endif %}
            {% endfor %}
          </select>
          
        </div>
      </div>
    </div>
  </div>
</div>
<!-- OOH product filters starts from here -->

<div id="ooh_product_filter_section">
  <div class="page-width">
    <h2 class="gush-font-h1" style="font-size:42px">Select 3 paint packs for free</h2>
    <h4 style="font-size:16px;">
      These pocket-sized (20ml) sample sachets work just like ketchup* â€” simply tear, squeeze and apply
    </h4>
    {% assign collection = collections['vibe-1'] %}
    <div class="vibe-1 {% unless collection.handle == selected_vibe %}hidden{% endunless %} ooh_filtered_products"
      data-vibe="{{ collection.handle }}">
      {%- for product in collection.products -%}
        {%- liquid
          assign current_variant = blank
    
          for variant in product.variants
            if variant.option1 == 'Gush Cair' and variant.option2 == 'Paint Sample (20ml)'
              assign current_variant = variant
            endif
          endfor
        -%}
        
      {% if current_variant != blank %}
      <div class="product-item">
        <input type="checkbox" id="vibe_1_{{ product.title }}" name="vibe" value="{{ current_variant.id }}" data-title="{{ product.title }}">
        <label for="vibe_1_{{ product.title }}">
          <div class="reveal">
            {% for image in product.images limit: 1 offset: 1 %}
            <img class="grid-view-item__image" src="{{ image | img_url:" 200x200" }}">
            {% endfor %}
  
            <img class="hidden" src="{{ 'paint_pack_sacket.png' | asset_url }}">
          </div>
        </label>

        <h4>{{ product.title }}</h4>
        <h5>{{ current_variant.title }}</h5>
        <!-- Add code to display product image, price, etc. -->
      </div>
      {% endif %}
      {%- endfor -%}
    </div>

    {% assign collection = collections['vibe-2'] %}
    <div class="vibe-2 {% unless collection.handle == selected_vibe %}hidden{% endunless %} ooh_filtered_products"
      data-vibe="{{ collection.handle }}">
      {%- for product in collection.products -%}
      {%- liquid
      assign current_variant = blank

      for variant in product.variants
      if variant.option1 == 'Gush Cair' and variant.option2 == 'Paint Sample (20ml)'
      assign current_variant = variant
      endif
      endfor
      -%}
      {% if current_variant != blank %}
      <div class="product-item">
        <input type="checkbox" id="vibe_2_{{ product.title }}" name="vibe" value="{{ current_variant.id }}" data-title="{{ product.title }}">
        <label for="vibe_2_{{ product.title }}">
          <div class="reveal">
            {% for image in product.images limit: 1 offset: 1 %}
            <img class="grid-view-item__image" src="{{ image | img_url:" 200x200" }}">
            {% endfor %}
  
            <img class="hidden" src="{{ 'paint_pack_sacket.png' | asset_url }}">
          </div>
        </label>
        <h4>{{ product.title }}</h4>
        <h5>{{ current_variant.title }}</h5>
        <!-- Add code to display product image, price, etc. -->
      </div>
      {% endif %}
      {%- endfor -%}
    </div>

    {% assign collection = collections['vibe-3'] %}
    <div class="vibe-3 {% unless collection.handle == selected_vibe %}hidden{% endunless %} ooh_filtered_products"
      data-vibe="{{ collection.handle }}">
      {%- for product in collection.products -%}
      {%- liquid
      assign current_variant = blank

      for variant in product.variants
      if variant.option1 == 'Gush Cair' and variant.option2 == 'Paint Sample (20ml)'
      assign current_variant = variant
      endif
      endfor
      -%}
      {% if current_variant != blank %}
      <div class="product-item">
        <input type="checkbox" id="vibe_3_{{ product.title }}" name="vibe" value="{{ current_variant.id }}" data-title="{{ product.title }}">
        <label for="vibe_3_{{ product.title }}">
          <div class="reveal">
            {% for image in product.images limit: 1 offset: 1 %}
            <img class="grid-view-item__image" src="{{ image | img_url:" 200x200" }}">
            {% endfor %}
  
            <img class="hidden" src="{{ 'paint_pack_sacket.png' | asset_url }}">
          </div>
        </label>

        <h4>{{ product.title }}</h4>
        <h5>{{ current_variant.title }}</h5>
        <!-- Add code to display product image, price, etc. -->
      </div>
      {% endif %}
      {%- endfor -%}
    </div>
  </div>
</div>

  

  <!-- OOH Whats include in package starts from here -->
 <style>
    .banner {
    width: 100%;
    height: 400px;
    background-image: url(https://cdn.shopify.com/s/files/1/0614/1470/3297/files/whats_in_pack.png?v=1696527216);
    background-position: center center;
    background-size: cover;
      dis
  }
</style>
<div id="ooh_package_you_get_section">
  <h3 class="gush-font-h1">What you"ll get</h3>
  <div class="banner"><p></p></div>
</div> 


  
<!-- OOH survey starts from here -->

  
 <h3>Q1. What are you painting ?</h3>
  <label><input type="radio" name="question1" value="One Room">One Room</label>
  <label><input type="radio" name="question1" value="Multiple Room">Multiple Room</label>

   <h3>Q2. How soon do you want to start painting ?</h3>
     <label><input type="radio" name="question2" value="Within 1-4 Weeks">Within 1-4 Weeks</label>
     <label><input type="radio" name="question2" value="Within 1-3 Months">Within 1-3 Months</label>
     <label><input type="radio" name="question2" value="More then 3 Months">More then 3 Months</label>
  
  <!-- Add more radio buttons as needed --><br>
  <button type="submit">Submit</button>


<!-- OOH Order Deatils starts from here -->
  <div id="OOH_order_details_section">
  <h2>Order Details</h2>

  <div id="selected_colors">color: <span class="colors"></span></div> 
</div>
</form>
</ooh-campaign-component>
<script>
  class OOHCampaignComponent extends HTMLElement {
    constructor() {
      super()
      
      this.form = this.querySelector('#vibe-selection')
      this.filter = this.form.querySelector('select#collection-filter-select')
      
      this.selectedColors = []
      this.colorInfoEl = this.querySelector('#selected_colors span')

      this.selectedVariants = []
    }

    connectedCallback() {
      
      this.form.addEventListener('change', this.handleChange.bind(this))
      this.filter.addEventListener('change', this.handleFilterChange.bind(this))
    }

    handleFilterChange(e) {
      e.preventDefault()
      const el = e.currentTarget

      const collections = this.querySelectorAll('[data-vibe]')
      const vibe = el.value

      collections.forEach(item => {
        const _vibe = item.dataset.vibe
        if (vibe === _vibe) {
          if (item.classList.contains('hidden')) item.classList.remove('hidden')
        }
        else {
          if (!item.classList.contains('hidden')) item.classList.add('hidden')
        }
      })
    }

    handleChange(e) {
      const el = e.target
      const formData = new FormData(this.form)
      if(el.getAttribute('name') == 'vibe') {
        
        const value = el.dataset.title
        
        
        if(!this.selectedColors.includes(value)) this.selectedColors.push(value)

        formData.getAll('vibe').forEach(vibe => {
          if(!this.selectedVariants.includes(parseInt(vibe))) this.selectedVariants.push(parseInt(vibe))
        })
        

        this.colorInfoEl.innerHTML = this.selectedColors.join(', ')
        
      }
    }
  }
  customElements.define('ooh-campaign-component', OOHCampaignComponent)
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<script type="text/javascript">
        jQuery(document).ready(function($){
        $('.swiper-wrapper-1').slick({
    dots: true,
    infinite: true,
    speed: 300,
    slidesToShow: 1,
    adaptiveHeight: true
  });
      });
</script>
{% schema %}
 {
    "name":"OOH Filter Products",
    "settings":[
        {
            "type":"text",
            "id":"heading",
            "label":"Heading"
        }
    ],
    "blocks":[
        {
            "type":"slide",
            "name":"Slide",
            "settings":[
                {
                    "type":"image_picker",
                    "id":"img",
                    "label":"Image"
                },
              {
"id" : "vibe_collection",
"type" : "collection",
"label" : "collection"
}
            ]
        }
    ],
    "presets":[
        {
            "name":"OOH Filter Products"
        }
    ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
