<style>
  .our-commitment {
    padding: 5rem 0;
  }

  .our-commitment .content {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 100px;
    align-items: center;
  }

  .our-commitment h2,
  .our-commitment p {
    margin: 0 30px 0 0;
    padding: 0;
    max-width: 466px;
    color: #796E62;
  }
  .our-commitment h2 {
    margin-bottom: 20px;
  }
  .mobile_responsive_image {
    display: none;
  }
  @media screen and (max-width: 1000px) {
    .our-commitment h2 {
      font-size: 48px !important;
    }
  }

  @media screen and (max-width: 750px) {
    .our-commitment .content {
      grid-template-columns: repeat(1, 1fr);
      gap: 50px;
    }
    .our-commitment .content div:nth-of-type(1) {
      order: 2;
    }
    .our-commitment .content div:nth-of-type(2) {
      order: 1;
    }
    .page-width {
      padding: 0 2.5rem !important;
    }
    .content h2 {
      font-size: 32px !important;
      max-width: 80%;
      margin: 4px 0;
    }
    .content p {
      max-width: 60%;
      margin: 0;
    }
    .iframe_container {

      margin: 0 -25px !important;
    }
    .mobile_responsive_image {
      display: none;
      margin: 0 -25px !important;
    }
    .mobile_responsive_image img {
      width: 100%;
    }
    .our-commitment iframe {
      width: 100%;
      height: 300px;
      margin: 30px 0;
    }
    .our-commitment {
      padding-bottom: 0;
    }
  }
</style>

<div class="our-commitment">
  <div class="content page-width">
    <div class="iframe_container">
      <div
        id="our-commitment-lottie-container"
        data-lottie-file-path="{{ section.settings.lottie_file_name | asset_url }}"
      ></div>
    </div>
    <div class="mobile_responsive_image">
      <img src="{{ section.settings.image | image_url }}">
    </div>
    <div>
      <h2 class="gush-font-h1">{{ section.settings.title }}</h2>
      <p class="gush-font-p1">{{ section.settings.description }}</p>
    </div>
  </div>
</div>
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<script>
  var solutionLottieContainer = document.getElementById('our-commitment-lottie-container');
  var lottieFilePath = solutionLottieContainer.dataset.lottieFilePath;

  var solutionAnimation = bodymovin.loadAnimation({
    container: solutionLottieContainer, // required
    path: lottieFilePath, // required
    renderer: 'svg', // required
    loop: true, // optional
    autoplay: false, // optional
    name: "Lottie Animation", // optional
  });

  solutionAnimation.setSpeed(.5);

  // "listen" & check when header is out of viewport
  // (i set 50% = visible => threshold: 0.5 (to set))
  const solutionLottieViewport = function() {
    let options = {
      rootMargin: '-100px',
      threshold: .5
    }

    let solutionObserver = new IntersectionObserver(entries => {
      entries[0].isIntersecting === true
        ? solutionAnimation.play()
        : solutionAnimation.goToAndStop(0, 0);
  	if(entries[0].isIntersecting) solutionObserver.unobserve(entries[0].target);
    }, options);

    solutionObserver.observe(document.querySelector('#our-commitment-lottie-container'));
  }

  solutionLottieViewport();
</script>

{% schema %}
{
  "name": "Our Commitment",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    }, {
      "type": "textarea",
      "id": "description",
      "label": "Description"
    }, {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },{
      "type": "text",
      "id": "lottie_file_name",
      "label": "Lottie file name here"
    }
  ],
  "presets": [
    {
      "name": "Our Commitment"
    }
  ]
}
{% endschema %}
