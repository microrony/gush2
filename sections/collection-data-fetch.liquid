{%- paginate collection.products by 50 -%}
  {%- capture product_data -%}
    {%- for product in collection.products -%}
      {{ product | json }}{%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  {%- endcapture -%}
{%- endpaginate -%}
<script id="collection__data">
  {
    "products": [
      {{ product_data }}
    ]
  }
</script>
{% schema %}
  {
    "name": "Collection data",
    "settings": []
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}